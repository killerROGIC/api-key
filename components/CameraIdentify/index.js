var e = require("../../@babel/runtime/helpers/typeof");
(wx.webpackJsonp = wx.webpackJsonp || []).push([
  [5], {
    141: function(e, t, o) {
      e.exports = o.p + "components/CameraIdentify/index.wxml"
    },
    386: function(e, t, o) {
      o(141)
    },
    387: function(e, t, o) {},
    388: function(e, t) {
      e.exports = "data:image/png;base64,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"
    },
    518: function(t, o, n) {
      n.r(o), n(386);
      var i, r, a = n(0),
        s = n.n(a),
        c = n(13),
        u = n(11),
        l = (n(387), function(e, t) {
          if (Array.isArray(e)) return e;
          if (Symbol.iterator in Object(e)) return function(e, t) {
            var o = [],
              n = !0,
              i = !1,
              r = void 0;
            try {
              for (var a, s = e[Symbol.iterator](); !(n = (a = s.next()).done) && (o.push(a.value), !t || o.length !== t); n = !0);
            } catch (e) {
              i = !0, r = e
            } finally {
              try {
                !n && s.return && s.return()
              } finally {
                if (i) throw r
              }
            }
            return o
          }(e, t);
          throw new TypeError("Invalid attempt to destructure non-iterable instance")
        }),
        h = "function" == typeof Symbol && "symbol" == e(Symbol.iterator) ? function(t) {
          return e(t)
        } : function(t) {
          return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : e(t)
        },
        p = Object.assign || function(e) {
          for (var t = 1; t < arguments.length; t++) {
            var o = arguments[t];
            for (var n in o) Object.prototype.hasOwnProperty.call(o, n) && (e[n] = o[n])
          }
          return e
        },
        f = function() {
          function e(e, t) {
            for (var o = 0; o < t.length; o++) {
              var n = t[o];
              n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n)
            }
          }
          return function(t, o, n) {
            return o && e(t.prototype, o), n && e(t, n), t
          }
        }(),
        m = function e(t, o, n) {
          null === t && (t = Function.prototype);
          var i = Object.getOwnPropertyDescriptor(t, o);
          if (void 0 === i) {
            var r = Object.getPrototypeOf(t);
            return null === r ? void 0 : e(r, o, n)
          }
          if ("value" in i) return i.value;
          var a = i.get;
          return void 0 !== a ? a.call(n) : void 0
        };

      function d(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
      }

      function g(t, o) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !o || "object" != e(o) && "function" != typeof o ? t : o
      }
      var y = void 0,
        A = (r = i = function(t) {
          function o() {
            var e, t, n;
            d(this, o);
            for (var i = arguments.length, r = Array(i), a = 0; a < i; a++) r[a] = arguments[a];
            return t = n = g(this, (e = o.__proto__ || Object.getPrototypeOf(o)).call.apply(e, [this].concat(r))), n.$usedState = ["anonymousState__temp", "anonymousState__temp2", "anonymousState__temp5", "loopArray178", "$compid__242", "$compid__243", "cameraHeight", "light", "imageVisible", "productList", "notIdentifyVisible", "tipsVisible", "handleChangeLoaction", "handleNavTo", "handleCloseCamera", "picture"], n.customComponents = ["AtModal", "AtModalContent", "AtModalAction"], g(n, t)
          }
          return function(t, o) {
            if ("function" != typeof o && null !== o) throw new TypeError("Super expression must either be null or a function, not " + e(o));
            t.prototype = Object.create(o && o.prototype, {
              constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            }), o && (Object.setPrototypeOf ? Object.setPrototypeOf(t, o) : t.__proto__ = o)
          }(o, t), f(o, [{
            key: "_constructor",
            value: function() {
              m(o.prototype.__proto__ || Object.getPrototypeOf(o.prototype), "_constructor", this).apply(this, arguments);
              var e = !s.a.getStorageSync("TIPSHOW");
              this.state = {
                light: !1,
                cameraHeight: 414,
                productList: [],
                imageVisible: !1,
                notIdentifyVisible: !1,
                tipsVisible: e
              }, this.$$refs = new s.a.RefsArray
            }
          }, {
            key: "componentWillMount",
            value: function() {
              var e = this,
                t = s.a.getSystemInfoSync(),
                o = t.screenWidth / 375 * 454,
                n = o / t.screenHeight > .55 ? parseInt(.55 * t.screenHeight) : parseInt(o);
              this.setState({
                cameraHeight: n
              }), this.get("buc/data/dictionary/getYHBOsstokenConfigParams", {}).then((function(t) {
                y = e.getOSSObj(t.data)
              }))
            }
          }, {
            key: "setNotIdentifyVisible",
            value: function(e) {
              this.setState({
                notIdentifyVisible: e
              })
            }
          }, {
            key: "setTipsVisible",
            value: function(e, t) {
              t && s.a.setStorageSync("TIPSHOW", 1), this.setState({
                tipsVisible: e
              })
            }
          }, {
            key: "getOSSObj",
            value: function(e) {
              var t = e.AccessKeyId,
                o = e.AccessKeySecret,
                n = function(e, t) {
                  var o = {};
                  for (var n in e) t.indexOf(n) >= 0 || Object.prototype.hasOwnProperty.call(e, n) && (o[n] = e[n]);
                  return o
                }(e, ["AccessKeyId", "AccessKeySecret"]);
              return p({
                accessKeyID: t,
                accessKeySecret: o,
                host: "https://fqzy-other.oss-cn-shenzhen.aliyuncs.com",
                timeout: 6e4
              }, n)
            }
          }, {
            key: "uploadOSS",
            value: function(e) {
              var t = this,
                o = this;
              return s.a.showLoading(), console.log("uploadOSS", e), Object(c.c)(e, y).then((function(e) {
                console.log("url", e), s.a.request({
                  method: "POST",
                  url: u.a + "search/searchimg",
                  headers: {
                    "content-type": "application/x-www-form-urlencoded"
                  },
                  data: {
                    object: e
                  },
                  success: function(n) {
                    if (console.log("success", n), "200" === n.data.code) {
                      t.imgUrl = e, s.a.hideLoading();
                      var i = n.data.data.product_list.filter((function(e) {
                        return e.score >= .6
                      })).filter((function(e, t) {
                        return t < 3
                      }));
                      i.length >= 1 ? o.setState({
                        productList: i,
                        imageVisible: !0
                      }) : o.setNotIdentifyVisible(!0)
                    } else console.error(n.data.data)
                  },
                  dataType: "json",
                  fail: function(e) {
                    console.error(e), s.a.hideLoading(), s.a.showToast({
                      title: e.errMsg,
                      icon: "none"
                    })
                  }
                })
              })).catch((function(e) {
                console.error(e), s.a.hideLoading()
              }))
            }
          }, {
            key: "bindCameraError",
            value: function(e) {
              console.error(e)
            }
          }, {
            key: "handleTakePhoto",
            value: function(e) {
              return this.uploadOSS(e)
            }
          }, {
            key: "takePhotoes",
            value: function() {
              if (console.log("takePhotoes"), !this.state.imageVisible) {
                var e = s.a.createCameraContext(),
                  t = this;
                e.takePhoto({
                  quality: "high",
                  success: function(e) {
                    console.log("res", e.tempImagePath), t.handleTakePhoto(e.tempImagePath)
                  },
                  fail: function(e) {
                    console.error(e)
                  }
                })
              }
            }
          }, {
            key: "handleChangeLoaction",
            value: function(e) {
              var t = this.props.handleChangeLoaction;
              t(e)
            }
          }, {
            key: "showImage",
            value: function(e) {
              s.a.previewImage({
                current: 0,
                urls: [e]
              })
            }
          }, {
            key: "switchLight",
            value: function() {
              var e = this.state.light;
              this.setState({
                light: !e
              })
            }
          }, {
            key: "handleChoiceImg",
            value: function() {
              var e = this;
              this.state.imageVisible || this.catchCamera({
                sourceType: ["album"],
                isCompress: !0,
                success: function(t) {
                  console.log("res", t), e.handleTakePhoto(t)
                },
                fail: function(e) {
                  "chooseImage:fail cancel" != e.errMsg && "chooseMedia:fail cancel" != e.errMsg ? s.a.showToast({
                    title: e.errMsg,
                    icon: "none"
                  }) : console.log("取消选择")
                }
              })
            }
          }, {
            key: "navToIdentify",
            value: function(e) {
              var t = this.props.handleNavTo;
              console.log(void 0 === t ? "undefined" : h(t), t), this.setState({
                imageVisible: !1
              }), t && t(e)
            }
          }, {
            key: "setImageVisible",
            value: function(e) {
              this.setState({
                imageVisible: e
              })
            }
          }, {
            key: "stopPropagation",
            value: function(e) {
              e.stopPropagation()
            }
          }, {
            key: "identifyFail",
            value: function() {
              var e = this.state.productList,
                t = {
                  imgUrl: "https://other.weijianapp.com/" + this.imgUrl,
                  productName: e.map((function(e) {
                    return e.brandName + "-" + e.productName
                  })).join(","),
                  type: 6
                };
              this.setImageVisible(!1), this.post("buc/user/feedback/addImageRecognition", t)
            }
          }, {
            key: "_createData",
            value: function() {
              var e = this;
              this.__state = arguments[0] || this.state || {}, this.__props = arguments[1] || this.props || {};
              var t = this.$prefix,
                o = Object(a.genCompid)(t + "$compid__242"),
                i = l(o, 2),
                r = i[0],
                s = i[1],
                c = Object(a.genCompid)(t + "$compid__243"),
                u = l(c, 2),
                h = u[0],
                p = u[1],
                f = this.__state,
                m = (f.light, f.cameraHeight, f.productList),
                d = f.imageVisible,
                g = this.__props,
                y = g.handleCloseCamera,
                A = (g.picture, n(388)),
                b = d ? n(32) : null,
                S = n(32),
                I = d ? m.map((function(t, o) {
                  return t = {
                    $original: Object(a.internal_get_original)(t)
                  }, {
                    $loopState__temp4: d ? e.httpToHttps(t.$original.imgUrl) : null,
                    $original: t.$original
                  }
                })) : [];
              return a.propsManager.set({
                isOpcity: !0,
                colors: "#fff",
                handleBack: y
              }, s, r), a.propsManager.set({
                isOpened: this.__state.notIdentifyVisible
              }, p, h), Object.assign(this.__state, {
                anonymousState__temp: A,
                anonymousState__temp2: b,
                anonymousState__temp5: S,
                loopArray178: I,
                $compid__242: s,
                $compid__243: p
              }), this.__state
            }
          }]), o
        }(a.Component), i.$$events = ["bindCameraError", "handleChoiceImg", "takePhotoes", "switchLight", "navToIdentify", "setImageVisible", "identifyFail", "setNotIdentifyVisible", "setTipsVisible", "stopPropagation"], i.$$componentPath = "components/CameraIdentify/index", r);
      Component(n(0).default.createComponent(A))
    }
  },
  [
    [518, 0, 1, 2]
  ]
]);